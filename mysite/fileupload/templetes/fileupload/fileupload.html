<!DOCTYPE html>
<html>
    <head>
        <title>
            MP3 to Text
        </title>
        <style>
            #drop-zone{
                border: 2px dashed #ccc;
                padding: 50px;
                text-align:center;
                cursor: pointer;
                transition: background-color 0.3s ease;
            }

            #drop-zone.dragover{
                background-color: #8f6666;
            }
            .hidden-file-input {
                display: none;
            }
        </style>
    </head>
    <body>
        <h1>MP3 to Text</h1>
            <div id ="drop-zone">
                <input type ="file" name="file" id="file-input" class="hidden-file-input" multiple accept="audio/*">
                드래그 앤 드롭   /    클릭
            </div>
         </form>


    <script>
    const dropZone = document.getElementById('drop-zone');
    const fileInput = document.getElementById('file-input');
    const fileListDisplay = document.getElementById('file-list');

    //드레그 앤 드롭 영역 클릭 시 파일 선택 창 열기
    dropZone.addEventListener('click', () => {
        fileInput.click();
    }); 

    ['dragenter', 'dragover'].forEach(eventName => {
        dropZone.addEventListener(eventName, (event)=>{
            event.preventDefault();
            event.stopPropagation();
            dropZone.classList.add('dragover');
        });
    });

    //드래그 종료시 스타일 복구
    ['dragleave', 'drop'].forEach(eventName => {
        dropZone.addEventListener(eventName, (event)=>{
            event.preventDefault();
            event.stopPropagation();
            dropZone.classList.remove('dragover');
        });
    });

    //파일 드롭 처리
    dropZone.addEventListener('drop',(event) =>{
        const files = event.dataTransfer.files;
        let selectedFile = null;
        //드롭된 파일을 숨겨진 input 요소의 files 리스트에 할당
        if(files.length === 0)
        {
            alert('파일을 선택해 주세요');
            return;
        }

        for(const file of files)
        {
            if(file.type === 'audio/mpeg' || file.type === 'audio/wav')
            {
                selectedFile = file;
                break;
            }
        }

        if (selectedFile == null)
        {
            alert("오디오 파일을 넣어 주세요");
            return;
        }

        const dataTransfer = new DataTransfer();

        dataTransfer.items.add(selectedFile);
  
        fileInput.files = dataTransfer.files;

        console.log(files);
    });
    
</script>
    </body>
</html>